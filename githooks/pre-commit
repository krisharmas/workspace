#!/bin/sh
#

# Remove trailing whitespace from all files that are being committed.
files=$(git status --porcelain | grep "^[A-Z][[:space:]]" | awk -F" " '{print $2}')
for f in $files
do
    sed -i '' 's/[[:space:]]*$//' $f
    git add $f
done

# If there are whitespace errors, print the offending file names and fail.
exec git diff-index --check --cached $against --
